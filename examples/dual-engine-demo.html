<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@ldesign/chart 双引擎演示</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 10px;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
    }

    .info {
      background: #e3f2fd;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      border-left: 4px solid #2196f3;
    }

    .info h3 {
      margin-bottom: 10px;
      color: #1976d2;
    }

    .chart-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .chart-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .chart-card h2 {
      margin: 0 0 15px 0;
      color: #333;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .engine-tag {
      font-size: 12px;
      padding: 4px 12px;
      border-radius: 4px;
      font-weight: normal;
    }

    .echarts-tag {
      background: #5470c6;
      color: white;
    }

    .vchart-tag {
      background: #91cc75;
      color: white;
    }

    .chart-container {
      width: 100%;
      height: 400px;
      border: 1px solid #eee;
      border-radius: 4px;
    }

    .controls {
      text-align: center;
      margin: 20px 0;
    }

    button {
      padding: 10px 20px;
      margin: 0 10px;
      border: none;
      border-radius: 4px;
      background: #2196f3;
      color: white;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.3s;
    }

    button:hover {
      background: #1976d2;
    }

    .status {
      text-align: center;
      margin: 20px 0;
      padding: 15px;
      background: #f0f0f0;
      border-radius: 4px;
    }

    .error {
      background: #ffebee;
      color: #c62828;
      padding: 15px;
      border-radius: 4px;
      margin: 20px 0;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>🎉 @ldesign/chart 双引擎演示</h1>
    <p class="subtitle">ECharts + VChart 双引擎架构 | 统一 API | 智能选择</p>

    <div class="info">
      <h3>📝 说明</h3>
      <p>本演示展示了 @ldesign/chart 的双引擎架构。左侧使用 <strong>ECharts</strong> 引擎（成熟稳定），右侧使用 <strong>VChart</strong> 引擎（小程序优先）。</p>
      <p style="margin-top: 10px;">两个引擎使用<strong>完全相同的配置代码</strong>，只需指定 <code>engine</code> 参数即可切换。</p>
    </div>

    <div class="controls">
      <button onclick="initCharts()">🚀 初始化图表</button>
      <button onclick="updateData()">🔄 更新数据</button>
      <button onclick="toggleTheme()">🌓 切换主题</button>
    </div>

    <div id="status" class="status">
      <strong>状态：</strong><span id="status-text">等待初始化...</span>
    </div>

    <div id="error" class="error" style="display: none;"></div>

    <div class="chart-grid">
      <!-- ECharts 图表 -->
      <div class="chart-card">
        <h2>
          折线图
          <span class="engine-tag echarts-tag">ECharts 引擎</span>
        </h2>
        <div id="chart-echarts" class="chart-container"></div>
      </div>

      <!-- VChart 图表 -->
      <div class="chart-card">
        <h2>
          折线图
          <span class="engine-tag vchart-tag">VChart 引擎</span>
        </h2>
        <div id="chart-vchart" class="chart-container"></div>
      </div>
    </div>

    <div class="info" style="margin-top: 30px;">
      <h3>💡 核心特性</h3>
      <ul style="margin-left: 20px; margin-top: 10px;">
        <li>✅ <strong>统一 API</strong> - 同一套代码，多个引擎</li>
        <li>✅ <strong>智能选择</strong> - 根据特性自动选择最佳引擎</li>
        <li>✅ <strong>按需加载</strong> - 只打包使用的引擎</li>
        <li>✅ <strong>100% 兼容</strong> - 现有代码无需改动</li>
        <li>✅ <strong>小程序支持</strong> - VChart 提供优秀的小程序支持</li>
        <li>✅ <strong>3D 图表</strong> - VChart 支持 3D 可视化</li>
      </ul>
    </div>
  </div>

  <script type="module">
    // 注意：这是演示代码，实际使用时需要正确导入模块

    let charts = {};
    let darkMode = false;

    // 模拟数据
    function generateData() {
      return Array.from({ length: 12 }, () => Math.floor(Math.random() * 100) + 20);
    }

    // 更新状态
    function updateStatus(text) {
      document.getElementById('status-text').textContent = text;
    }

    // 显示错误
    function showError(message) {
      const errorDiv = document.getElementById('error');
      errorDiv.textContent = '❌ ' + message;
      errorDiv.style.display = 'block';
      setTimeout(() => {
        errorDiv.style.display = 'none';
      }, 5000);
    }

    // 初始化图表
    window.initCharts = async function () {
      updateStatus('正在初始化图表...');

      try {
        // 这里需要实际导入 @ldesign/chart
        // import { Chart, EChartsEngine, VChartEngine, engineManager } from '@ldesign/chart';

        // 模拟初始化
        updateStatus('✅ 图表初始化成功！双引擎已就绪。');

        // 实际代码示例：
        /*
        // 注册引擎
        engineManager.register('echarts', new EChartsEngine());
        engineManager.register('vchart', new VChartEngine());
        
        // 创建 ECharts 图表
        charts.echarts = new Chart(document.getElementById('chart-echarts'), {
          type: 'line',
          data: {
            labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
            datasets: [{
              name: '销售额',
              data: generateData()
            }]
          },
          title: 'ECharts 引擎渲染',
          engine: 'echarts',
          darkMode: darkMode,
        });
        
        // 创建 VChart 图表
        charts.vchart = new Chart(document.getElementById('chart-vchart'), {
          type: 'line',
          data: {
            labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
            datasets: [{
              name: '销售额',
              data: generateData()
            }]
          },
          title: 'VChart 引擎渲染',
          engine: 'vchart',
          darkMode: darkMode,
        });
        */

      } catch (error) {
        showError('初始化失败: ' + error.message);
        updateStatus('初始化失败');
      }
    };

    // 更新数据
    window.updateData = function () {
      updateStatus('正在更新数据...');

      try {
        // 实际代码：
        /*
        const newData = {
          labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
          datasets: [{
            name: '销售额',
            data: generateData()
          }]
        };
        
        charts.echarts?.updateData(newData);
        charts.vchart?.updateData(newData);
        */

        updateStatus('✅ 数据更新成功！');
      } catch (error) {
        showError('更新失败: ' + error.message);
      }
    };

    // 切换主题
    window.toggleTheme = function () {
      darkMode = !darkMode;
      updateStatus(`正在切换到${darkMode ? '暗黑' : '亮色'}模式...`);

      try {
        // 实际代码：
        /*
        charts.echarts?.setDarkMode(darkMode);
        charts.vchart?.setDarkMode(darkMode);
        */

        updateStatus(`✅ 已切换到${darkMode ? '暗黑' : '亮色'}模式！`);
      } catch (error) {
        showError('切换主题失败: ' + error.message);
      }
    };

    // 页面提示
    console.log(`
    ╔════════════════════════════════════════════════════════╗
    ║  @ldesign/chart 双引擎演示                              ║
    ║                                                        ║
    ║  此演示展示了双引擎架构的基本用法。                        ║
    ║  实际使用时需要：                                        ║
    ║  1. 安装依赖: npm install @ldesign/chart echarts       ║
    ║  2. 或: npm install @ldesign/chart @visactor/vchart   ║
    ║  3. 在代码中正确导入并初始化引擎                          ║
    ║                                                        ║
    ║  查看文档: docs/dual-engine-guide.md                   ║
    ╚════════════════════════════════════════════════════════╝
    `);
  </script>
</body>

</html>
